<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="google-adsense-account" content="ca-pub-8089329941656548" />
  <title>{{TOWN_NAME}}, Montana - Treasure State</title>
  <meta name="description" content="{{META_DESCRIPTION}}" />

  <!-- Styles -->
  <link rel="stylesheet" href="../css/style.css" />
  <link rel="stylesheet" href="../css/modern-style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Open+Sans:wght@400;500;600&display=swap" rel="stylesheet" />

  <!-- Google tag (gtag.js) -->
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-NQ8F9RC7DE');
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Montana - The Treasure State",
    "alternateName": ["Treasure State", "TreasureState"],
    "url": "https://treasurestate.com/"
  }
  </script>
</head>
<body>
  <!-- Header / Navigation (keep intact) -->
  <div id="site-menu"></div>

  <!-- Hero Section -->
  <div id="site-hero">
    <header class="hero-section hero-section--small">
      <img
        src="../images/towns/{{HERO_IMAGE}}"
        alt="{{TOWN_NAME}}, Montana - Scenic View"
        class="hero-image hero-image--small"
        width="1920"
        height="800"
        onerror="this.onerror=null; this.src='../images/hero-image.jpg';"
      />
      <div class="hero-text hero-text--small">
        <h1>{{TOWN_NAME}}, Montana</h1>
        <p>{{TAGLINE}}</p>
      </div>
    </header>
  </div>

  <!-- Main Content -->
  <main>
    <section class="content-section">
      <!-- Quick Facts -->
      <h1>Quick Facts</h1>
      <ul>
        <li><strong>Population:</strong> {{POPULATION}}</li>
        <li><strong>County:</strong> {{COUNTY}}</li>
        <li><strong>Founded:</strong> {{FOUNDED}}</li>
        <li><strong>Elevation:</strong> {{ELEVATION}}</li>
        <li><strong>Known For:</strong> {{KNOWN_FOR}}</li>
      </ul>

      <!-- Notable People & Pop Culture -->
      <h1>Notable People & Pop Culture</h1>
      {{NOTABLE_PEOPLE_LIST}}

      <!-- Things to Do -->
      <h2>Top Things to Do in {{TOWN_NAME}}</h2>
      {{THINGS_TO_DO_LIST}}

      <!-- Local Industry & Economy -->
      <h2>Local Industry & Economy</h2>
      <p>{{ECONOMY_PARAGRAPH}}</p>
      {{ECONOMY_LIST}}

      <!-- History & Heritage -->
      <h2>History & Heritage</h2>
      <p>{{HISTORY}}</p>

      <!-- Seasonal Activities & Local Events -->
      <h2>Seasonal Activities & Local Events</h2>
      {{SEASONAL_ACTIVITIES}}

      <!-- Getting There & Nearby Destinations -->
      <h2>Getting There & Nearby Destinations</h2>
      {{GETTING_THERE}}

      <!-- Lodging Guide (affiliate links remain but town slug is dynamic) -->
      <h2>Best {{TOWN_NAME}} Hotels & Lodging Guide ({{CURRENT_YEAR}})</h2>
      <ul>
        <li><strong>Hotels:</strong> Find hotels in {{TOWN_NAME}} on <a href="https://expedia.com/affiliates/hotel-search-{{TOWN_SLUG}}.buq6o7k" target="_blank" rel="noopener">Expedia</a>.</li>
        <li><strong>Motels:</strong> Find motels in {{TOWN_NAME}} on <a href="https://expedia.com/affiliates/hotel-search-{{TOWN_SLUG}}.buq6o7k" target="_blank" rel="noopener">Expedia</a>.</li>
        <li><strong>Bed & Breakfasts:</strong> {{B_AND_B_DESCRIPTION}}</li>
        <li><strong>Vacation Rentals:</strong> Browse {{TOWN_NAME}} rentals on <a href="https://vrbo.com/affiliates/treasure_state/{{TOWN_SLUG}}" target="_blank" rel="noopener">VRBO</a>.</li>
        <li><strong>Campgrounds:</strong> {{CAMPGROUND_DESCRIPTION}}</li>
      </ul>
    </section>

    <!-- Affiliate Banner (keep intact) -->
    <section id="affiliate-banner" class="banner-section" style="min-height: 100px; margin: 20px 0; text-align: center; background: #f8f9fa; padding: 15px 0 10px 0; width: 100%;">
      <div style="width: 100%; max-width: 1200px; margin: 0 auto; text-align: center;">
        <iframe
          class="eg-affiliate-banners-frame"
          src="https://affiliates.expediagroup.com/products/banners?program=us-expedia&layout=leaderboard&image=mountains&message=hotel-treehouse-find-perfect-place-stay&link=stays&network=pz&camref=1011l52GG6"
          style="width: 728px; height: 90px; margin: 0 auto; border: none; display: block;"
          title="Expedia Hotel Deals"
        ></iframe>
      </div>
    </section>

    <div id="coming-soon"></div>
  </main>

  <!-- Footer (keep intact) -->
  <div id="site-footer"></div>

  <!-- Scripts -->
  <script src="../js/banner-loader.js"></script>
  <script>
    // Simplified logic for sandbox environments: fallback to inline text if fetch fails
    async function includeHTML(id, file) {
      try {
        const response = await fetch(file);
        if (!response.ok) throw new Error('Fetch failed');
        const html = await response.text();
        document.getElementById(id).innerHTML = html;
      } catch (err) {
        console.warn(`Could not load \${file}: \${err.message}`);
        // Fallback for sandbox/debugging
        const fallback = {
          'site-menu': '<!-- Menu placeholder -->',
          'site-footer': '<!-- Footer placeholder -->',
          'coming-soon': ''
        };
        if (id in fallback) {
          document.getElementById(id).innerHTML = fallback[id];
        }
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      const isTownPage = window.location.pathname.includes('/montana-towns/');
      const basePath = isTownPage ? '../' : './';

      includeHTML('site-menu', basePath + 'includes/header.html');
      if (document.getElementById('coming-soon')) {
        includeHTML('coming-soon', basePath + 'includes/coming-soon.html');
      }
      if (document.getElementById('site-footer')) {
        includeHTML('site-footer', basePath + 'includes/footer.html');
      }
    });
  </script>
</body>
</html>
